function create(){window.location.href="/postcards/new"}function edit(a){window.open("/postcards/"+a,"_blank")}function destroy(a){$.ajax({url:"/postcards/"+a,type:"DELETE",success:function(a){$(".alert strong").html(a.message),$(".alert").show().fadeIn(),datatables?datatables.draw():history.go(-1)}})}function mxpAddPlans(){var a=$('<div class="col-sm-4"><input type="text" class="form-control" name="planskey" placeholder="明信片" value=""></div><div class="col-sm-6"><input type="text"  class="form-control" name="planst" placeholder="个数" value=""></div>');$("#mxp_plans").append(a)}var datatables;$(document).ready(function(){var a=$("#main-datatables");a&&(datatables=a.DataTable({language:{url:"/javascripts/libs/datatables-chinese.json"},processing:!0,serverSide:!0,order:[[3,"desc"]],ajax:"/api/postcards",columns:[{name:"id"},{name:"t"},{name:"num"},{name:"start"},{name:"end"},{name:"close"}],columnDefs:[{targets:[3],render:function(a,b,c){return moment(a).fromNow()}},{targets:[4],render:function(a,b,c){return moment(a).fromNow()}},{targets:[5],render:function(a,b,c){return moment(a).fromNow()}},{targets:[6],render:function(a,b,c){return"<button onclick=\"edit('"+c[0]+"')\" class=\"btn btn-info\">编辑</button>&nbsp;<button onclick='destroy('"+c[0]+'\')" class="btn btn-danger">删除</button>'}}]})),$("#mxp_btn_add").click(function(){mxpAddPlans()})});