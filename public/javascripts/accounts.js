function create(){window.location.href="/accounts/new"}function edit(a){window.open("/accounts/"+a,"_blank")}function destroy(a){$.ajax({url:"/accounts/"+a,type:"DELETE",success:function(a){$(".alert strong").html(a.message),$(".alert").show().fadeIn(),datatables?datatables.draw():history.go(-1)}})}function showUserSelectModal(){var a=$("#user-select-modal");a.find("input[name=nickname]").val(""),a.find("p.user").remove(),a.modal("show")}function searchUsers(){var a=doT.template($("#users-tpl").text()),b=$("#user-select-modal"),c=b.find("input[name=nickname]").val(),d="/api/users/search/"+c+"/0";$.get(d,function(c){var d=a(c);b.find(".modal-body").append(d)})}function selectUser(a,b){$("form input[name=user]").val(a),$("form input[name=nickname]").val(b),$("#user-select-modal").modal("hide")}var datatables;$(document).ready(function(){var a=$("#main-datatables");a&&(datatables=a.DataTable({language:{url:"/javascripts/libs/datatables-chinese.json"},processing:!0,serverSide:!0,ajax:"/api/accounts",columns:[{name:"_id"},{name:"nickname"},{name:"points"}],columnDefs:[{targets:[3],render:function(a,b,c){return"<button onclick=\"edit('"+c[0]+"')\" class='btn btn-info'>编辑</button>&nbsp;<button onclick=\"destroy('"+c[0]+"')\" class='btn btn-danger'>删除</button>"}}]}))});