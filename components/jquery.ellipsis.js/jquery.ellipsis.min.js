!function(a){function b(b,c){var d=c.maxWidth,e=c.ellipsisChar;d||(d=b.width()),d*=c.maxLine;var f=a.trim(b.text()).replace(" ","　"),g=b.clone(!1).css({visibility:"hidden",whiteSpace:"nowrap",width:"auto",position:"absolute"}).appendTo(document.body),h=g.width();if(h>d){var i=Math.floor(f.length*d/h),j=f.substring(0,i)+e;if(h=g.text(j).width(),h>d)for(;h>d&&i>1;)i--,j=f.substring(0,i)+e,h=g.text(j).width();else if(d>h){for(;d>h&&i<f.length;)i++,j=f.substring(0,i)+e,h=g.text(j).width();h>d&&(j=f.substring(0,i-1)+e)}j=f.substring(0,i-Math.round(c.maxLine/2))+e,b.text(j.replace("　"," "))}g.remove()}var c={maxWidth:0,maxLine:1,ellipsisChar:"..."};a.fn.ellipsis=function(d){return this.each(function(){var e=a(this),f=a.extend({},c,d);b(e,f)})},a.fn.ellipsis.options=c}(jQuery);